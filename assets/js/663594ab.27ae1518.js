"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4113],{3905:(e,n,t)=>{t.d(n,{Zo:()=>p,kt:()=>u});var o=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,o,i=function(e,n){if(null==e)return{};var t,o,i={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var c=o.createContext({}),l=function(e){var n=o.useContext(c),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},p=function(e){var n=l(e.components);return o.createElement(c.Provider,{value:n},e.children)},d={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},m=o.forwardRef((function(e,n){var t=e.components,i=e.mdxType,a=e.originalType,c=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),m=l(t),u=i,h=m["".concat(c,".").concat(u)]||m[u]||d[u]||a;return t?o.createElement(h,r(r({ref:n},p),{},{components:t})):o.createElement(h,r({ref:n},p))}));function u(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var a=t.length,r=new Array(a);r[0]=m;var s={};for(var c in n)hasOwnProperty.call(n,c)&&(s[c]=n[c]);s.originalType=e,s.mdxType="string"==typeof e?e:i,r[1]=s;for(var l=2;l<a;l++)r[l]=t[l];return o.createElement.apply(null,r)}return o.createElement.apply(null,t)}m.displayName="MDXCreateElement"},3302:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>l});var o=t(7462),i=(t(7294),t(3905));const a={},r="Locations",s={unversionedId:"guide/concepts/locations",id:"guide/concepts/locations",title:"Locations",description:"Extensions can render custom views via iFrames. To support multiple views in different places every location of the iFrame gets a unique ID. These can be defined by the extension developer itself.",source:"@site/docs/guide/4_concepts/locations.md",sourceDirName:"guide/4_concepts",slug:"/guide/concepts/locations",permalink:"/admin-extension-sdk/docs/guide/concepts/locations",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"Guide",previous:{title:"Component sections",permalink:"/admin-extension-sdk/docs/guide/concepts/component-sections"},next:{title:"Positions",permalink:"/admin-extension-sdk/docs/guide/concepts/positions"}},c={},l=[{value:"Base location",id:"base-location",level:2},{value:"Change height of location iFrame",id:"change-height-of-location-iframe",level:2},{value:"Avoiding scrollbars",id:"avoiding-scrollbars",level:2},{value:"For existing plugin migrations: render Vue components instead of iFrames",id:"for-existing-plugin-migrations-render-vue-components-instead-of-iframes",level:2}],p={toc:l};function d(e){let{components:n,...a}=e;return(0,i.kt)("wrapper",(0,o.Z)({},p,a,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"locations"},"Locations"),(0,i.kt)("p",null,"Extensions can render custom views via iFrames. To support multiple views in different places every ",(0,i.kt)("inlineCode",{parentName:"p"},"location")," of the iFrame gets a unique ID. These can be defined by the extension developer itself."),(0,i.kt)("p",null,(0,i.kt)("em",{parentName:"p"},"Example:"),"  "),(0,i.kt)("p",null,"A extension wants to render a custom iFrame in a card in the dashboard. The ",(0,i.kt)("inlineCode",{parentName:"p"},"location")," of the iFrame has then a specific ",(0,i.kt)("inlineCode",{parentName:"p"},"locationId")," like ",(0,i.kt)("inlineCode",{parentName:"p"},"sw-dashboard-example-app-dashboard-card"),". The app can also render another iFrames which also get ",(0,i.kt)("inlineCode",{parentName:"p"},"locationId"),"s. In our example it is a iFrame in a custom modal: ",(0,i.kt)("inlineCode",{parentName:"p"},"example-app-example-modal-content"),"."),(0,i.kt)("p",null,"The extension want to render different views depending on the ",(0,i.kt)("inlineCode",{parentName:"p"},"location")," of the iFrame. So the extension developer can render the correct view depending on the ",(0,i.kt)("inlineCode",{parentName:"p"},"locationId"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"// Add the ui extensions when your extension is loaded in the hidden iFrame\nif (location.is(location.MAIN_HIDDEN)) {\n  ui.componentSection.add({\n      component: 'card',\n      positionId: 'sw-product-properties__before',\n      props: {\n          title: 'Hello from plugin',\n          subtitle: 'I am before the properties card',\n          /**\n           *  The locationId:\n           **/\n          locationId: 'my-app-card-before-properties'\n      }\n  })\n}\n\n// Render the custom UI when the iFrame location matches your defined location\nif (sw.location.is('my-app-card-before-properties')) {\n    document.body.innerHTML = '<h1>I am the in the location \"my-app-card-before-properties\"</h1>';\n}\n")),(0,i.kt)("h2",{id:"base-location"},"Base location"),(0,i.kt)("p",null,"Every extension gets rendered in a hidden iFrame. In this iFrame the extension can execute different commands to extend\nthe administration and add custom locations to different extension points. To check if the script will be executed in this\nlocation you can use the predefined constant:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"import { location } from '@shopware-ag/admin-extension-sdk';\n\nif (location.is(location.MAIN_HIDDEN)) {\n  // Do the stuff in the hidden iFrame\n}\n")),(0,i.kt)("h2",{id:"change-height-of-location-iframe"},"Change height of location iFrame"),(0,i.kt)("p",null,"The iFrame height is by default fixed. You can update the height with the location helper:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"location.updateHeight(750); // change iFrame height to 750px\n")),(0,i.kt)("p",null,"If you use a parameter then the height will automatically be calculated so that your whole view gets rendered. In most cases\nyou don't want to update the height manually. To watch for height changes you can use the auto resizer. It updates the iFrame\nheight everytime the height of the view changes:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"// watch for height changes and update the iFrame\nlocation.startAutoResizer();\n")),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"Auto Resizer example",src:t(3131).Z,width:"800",height:"346"})),(0,i.kt)("h2",{id:"avoiding-scrollbars"},"Avoiding scrollbars"),(0,i.kt)("p",null,"If you render custom locations it is useful to disable the scroll behavior in your view. Otherwise scrollbars are visible\nwhich aren't needed in most cases. To avoid this you can add the css property ",(0,i.kt)("inlineCode",{parentName:"p"},"overflow: hidden;")," to the ",(0,i.kt)("inlineCode",{parentName:"p"},"body")," element."),(0,i.kt)("h2",{id:"for-existing-plugin-migrations-render-vue-components-instead-of-iframes"},"For existing plugin migrations: render Vue components instead of iFrames"),(0,i.kt)("p",null,"In some cases you just want to use specific features from the SDK and some features from the existing plugin system which works with Twig and Component overriding. In this case you can do some things with the SDK but render components from the Shopware Component Factory instead of iFrames."),(0,i.kt)("p",null,"To do this you need to register the component in the existing plugin system:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"Shopware.Component.register('your-component-name', {\n  // your component\n})\n")),(0,i.kt)("p",null,"Now if you want to render the component in a location you need to add the name of the component to the current location. This can be done with the ",(0,i.kt)("inlineCode",{parentName:"p"},"sdkLocation")," store:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"Shopware.State.commit('sdkLocation/addLocation', {\n    locationId: 'your-location-id',\n    componentName: 'your-component-name'\n})\n")),(0,i.kt)("p",null,"With this feature you can create mix the usage of the SDK and the existing plugin system. A complete example could be looking like this. It creates a new tab item in the product detail page, renders a card with the componentSection renderer and inside the card it renders the location. But instead of the traditional location it renders a Vue component which was registered in the Shopware Component Factory."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-js"},"// in a normal plugin js file without a HTML file\nimport { ui, location } from '@shopware-ag/admin-extension-sdk';\n\nif (!location.isIframe()) {\n  const myLocationId = 'my-example-location-id';\n\n  // Create a new tab entry\n  ui.tabs('sw-product-detail').addTabItem({\n      label: 'Example tab',\n      componentSectionId: 'example-product-detail-tab-content'\n  })\n\n  // Add a new card to the tab content which renders a location\n  ui.componentSection.add({\n      component: 'card',\n      positionId: 'example-product-detail-tab-content',\n      props: {\n          title: 'Component section example',\n          locationId: myLocationId\n      }\n  })\n\n  // Register your component which should be rendered inside the location\n  Shopware.Component.register('your-component-name', {\n    // your component\n  })\n\n  // Add the component name to the specific location\n  Shopware.State.commit('sdkLocation/addLocation', {\n      locationId: myLocationId,\n      componentName: 'your-component-name'\n  })\n}\n")))}d.isMDXComponent=!0},3131:(e,n,t)=>{t.d(n,{Z:()=>o});const o=t.p+"assets/images/auto-resizer-c312932409cf7781ca9318664b85df43.gif"}}]);